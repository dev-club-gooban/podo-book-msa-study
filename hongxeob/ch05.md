# Ch05-4~ 이벤트 스토밍을 통한 마이크로 서비스 도출

## 이벤트 스토밍 스티커의 유형
|유형|크기/색깔|설명|
|------|---|---|
|도메인 이벤트|오렌지색|발생한 사건, 과거시제동사로 표헌|
|커맨드|파란색|도메인 이벤트를 트리거하는 명령|
|외부 시스템|핑크색|도메인 이벤트가 호출하거나 관계가 있는 레거시 또는 외부 시스템|
|액터|작은 노란색|개인 또는 조직의 역할|
|애그리거트|노란색|도메인 이벤트와 커맨드가 처리하는 데이터 상태가 변경되는 데이터|
|정책|라일락 색|이벤트 조건에 따라 진행되는 결정<br> When[이벤트] Then[커맨드]|
|읽기 모델|초록색|도메인 이벤트 액터에게 제공되는 데이터|
|사용자 인터페이스|흰색|스케치 형태의 화면 레이아웃|
|핫스팟|자주색|의문, 질문, 미결정 사항|

## 핵심
- 이벤트 스토밍 방법(순서)
  1. 도메인 이벤트 찾기
  2. 외부 시스템/외부 프로세스찾기
  3. 커맨드 찾기
  4. 핫스폿 찾기
  5. 액터 찾기
  6. 애그리거트 정의하기
  7. 바운디드 컨텍스트 정의하기
  8. 컨텍스트 매핑하기
- MSA 상세 설계시 백엔드 모델링
  - 헥사고날 아키텍처를 정용해 외부 영역과 내부 영역으로 구분하여 구축
  - 예를 들어, 이벤트 스토밍의 커맨드는 인바운드 어댑터의 하나인 REST API가 되고, 애그리거트는 내부 영역인 도메인 모델이 된다.
  - 이후 개략적인 모델링이 끝나면 좀더 구체적인 구현을 위해 프론트엔드와 연계되는 API 설계를 해야 한다.
- 두 가지 도메인 모델링
  - 도메인 모델 형태의 헥사고날
  - 트랜잭션 스크립트 형태의 헥사고날
    - 트랜잭션 스크립트 구조의 단점은 시스템이 복잡해 질 수록 비대하지는 점이 있다. 
  - 두 구조의 차이는 도메인 모델을 중심으로 두는지, 도메인 모델 없이 DTO를 중심에 두는지의 차이
## 중요
- API 설계 : 바람직한 REST API 설계를 위해 레오나르도 리처드슨의 REST API 성숙도 모델 중 레벨 2를 지향하여 작성
- 도메인 모델링에서의
  - 엔티티 / 값 객체의 차이
  - 엔티티는 다른 엔티티와 구별할 수 있는 식별자를 가진 객체
  - 값 객체는 각 속성이 개별적으로 변화하지 않는 객체. 객체 내부의 속성들의 합에 의해 전체 개념이 부여된다.
    - 또한 객체 내부의 속성이 수정되는 것이 아닌, 전체 객체가 한번에 생성되거나 삭제된다.

## 재미 및 호기심
- REST API 숙성도
- [도메인 모델 패턴 / 트랜잭션 스크립트 패턴 자세한 내용](https://velog.io/@dongvelop/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-%EB%8F%84%EB%A9%94%EC%9D%B8-%EB%AA%A8%EB%8D%B8-%ED%8C%A8%ED%84%B4%EA%B3%BC-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%ED%8C%A8%ED%84%B4)
- 어쩌면 나도 모르게 트랜잭션 스크립트 패턴을 사용했던 것 같다..?!
  - [트랜잭션 스크립트 패턴 -> 도메인 모델 패턴 리팩토링](https://everydayyy.tistory.com/111)
